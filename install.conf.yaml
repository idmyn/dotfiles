- defaults:
    link:
      create: true
      relink: true
    shell:
      stdout: true
      stderr: true

- clean: ['~']

- link:
    ~/.doom.d: emacs/.doom.d
    ~/.finicky.js: finicky/.finicky.js
    ~/.config/phoenix/phoenix.js: phoenix/phoenix.js
    ~/.config/karabiner.edn: karabiner/karabiner.edn
    ~/.config/fish/config.fish: shell/fish/config.fish
    ~/.config/fish/fishfile: shell/fish/fishfile
    ~/.config/fish/secrets.fish: shell/fish/secrets.fish
    ~/.profile: shell/.profile
    ~/.aliases: shell/.aliases
    ~/.secret-aliases: shell/.secret-aliases
    ~/.elvish/rc.elv: shell/elvish/rc.elv
    ~/.elvish/lib/nix.elv: shell/elvish/lib/nix.elv
    ~/.elvish/lib/direnv.elv: shell/elvish/lib/direnv.elv
    ~/.elvish/lib/secrets.elv: shell/elvish/lib/secrets.elv
    ~/.zshrc: shell/zsh/.zshrc
    ~/.zshenv: shell/zsh/.zshenv
    ~/.zsh_plugins.txt: shell/zsh/.zsh_plugins.txt
    ~/.config/kitty/kitty.conf: kitty/kitty.conf
    ~/.hyper.js: hyper/.hyper.js
    ~/.bin: shell/bin
    ~/.gitignore: git/.gitignore
    ~/.gitconfig:
      force: true
      path: git/.gitconfig
    ~/src/nandos/.gitconfig:
      if: '[ -d ~/src/nandos ]'
      path: git/.gitconfig-work

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - [bash ./shell/install-plugins.sh, Installing zsh and fish plugins]
  - [cd macOS && bash homebrew.sh, Installing packages from homebrew]
  # "hub clone" because the colon in a git clone url causes pyyaml to complain
  # https://pyyaml.org/wiki/YAMLColonInFlowContext
