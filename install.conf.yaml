- defaults:
    link:
      create: true
      relink: true
    shell:
      stdout: true
      stderr: true

- clean: ['~']

- link:
    ~/.backup.sh: backup.sh
    ~/.doom.d: emacs/.doom.d
    ~/.vimrc: .vimrc
    ~/.config/nvim/init.vim: .vimrc
    ~/Library/Application Support/Code/User/settings.json:
      force: true
      path: VSCode/settings.json
    ~/Library/Application Support/Code/User/keybindings.json:
      force: true
      path: VSCode/keybindings.json
    ~/.nixpkgs/darwin-configuration.nix: nix/darwin-configuration.nix
    ~/.finicky.js: macOS/finicky/.finicky.js
    ~/.config/phoenix/phoenix.js: macOS/phoenix/phoenix.js
    ~/.config/karabiner.edn: macOS/karabiner/karabiner.edn
    ~/.aliases: shell/.aliases
    ~/.secret-aliases: shell/.secret-aliases
    ~/.elvish/rc.elv: shell/elvish/rc.elv
    ~/.elvish/lib/nix.elv: shell/elvish/lib/nix.elv
    ~/.elvish/lib/direnv.elv: shell/elvish/lib/direnv.elv
    ~/.elvish/lib/secrets.elv: shell/elvish/lib/secrets.elv
    ~/.elvish/lib/k8s.elv: shell/elvish/lib/k8s.elv
    ~/.zshrc: shell/.zshrc
    ~/.zshenv: shell/.zshenv
    ~/.config/kitty/kitty.conf: kitty/kitty.conf
    ~/.tmux.conf: shell/.tmux.conf
    ~/.bin: shell/bin
    ~/.config/git/ignore: git/.gitignore
    ~/.gitconfig:
      force: true
      path: git/.gitconfig
    ~/src/nandos/.gitconfig:
      if: '[ -d ~/src/nandos ]'
      path: git/.gitconfig-work
    ~/src/nandos/.git-together:
      if: '[ -d ~/src/nandos ]'
      path: git/.git-together-secret

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - [cd macOS/homebrew; bash install.sh, Installing packages from homebrew]
