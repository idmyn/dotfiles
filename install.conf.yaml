- defaults:
    link:
      create: true
      relink: true
    shell:
      stdout: true
      stderr: true

- clean: ['~']

- link:
    ~/.doom.d: emacs/.doom.d
    ~/.finicky.js: macOS/finicky/.finicky.js
    ~/.config/phoenix/phoenix.js: macOS/phoenix/phoenix.js
    ~/.config/karabiner.edn: macOS/karabiner/karabiner.edn
    ~/.secret-aliases: shell/.secret-aliases
    ~/.elvish/rc.elv: shell/elvish/rc.elv
    ~/.elvish/lib/nix.elv: shell/elvish/lib/nix.elv
    ~/.elvish/lib/direnv.elv: shell/elvish/lib/direnv.elv
    ~/.elvish/lib/secrets.elv: shell/elvish/lib/secrets.elv
    ~/.zshrc: shell/.zshrc
    ~/.config/kitty/kitty.conf: kitty/kitty.conf
    ~/.bin: shell/bin
    ~/.gitignore: git/.gitignore
    ~/.gitconfig:
      force: true
      path: git/.gitconfig
    ~/src/nandos/.gitconfig:
      if: '[ -d ~/src/nandos ]'
      path: git/.gitconfig-work

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - [cd macOS/homebrew && bash install.sh, Installing packages from homebrew]
